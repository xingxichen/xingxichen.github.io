"use strict";(self["webpackChunkmy_vue"]=self["webpackChunkmy_vue"]||[]).push([[231],{64231:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doQuery.apply(null,arguments)}}},[a("a-row",[a("a-space",[a("div",[e._v(" 通话类型: ")]),a("a-col",{attrs:{span:4}},[a("a-select",{ref:"select",staticStyle:{width:"70px"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(e.options,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("div",[e._v(" 页码: ")]),a("a-col",{attrs:{span:2}},[a("a-input-number",{staticStyle:{width:"60px"},attrs:{label:"页码",onchange:e.doQuery,placeholder:"请输入页码"},model:{value:e.pagination.current,callback:function(t){e.$set(e.pagination,"current",t)},expression:"pagination.current"}})],1),a("div",[e._v(" 分页大小: ")]),a("a-col",{attrs:{span:8}},[a("a-input-number",{staticStyle:{width:"60px"},attrs:{label:"分页大小",placeholder:"请输入分页大小"},model:{value:e.pagination.defaultPageSize,callback:function(t){e.$set(e.pagination,"defaultPageSize",t)},expression:"pagination.defaultPageSize"}})],1),a("div",[e._v(" 手机号模糊匹配: ")]),a("a-col",{attrs:{span:4}},[a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入关键字"},model:{value:e.query.phone_number,callback:function(t){e.$set(e.query,"phone_number",t)},expression:"query.phone_number"}})],1),a("a-col",{attrs:{span:2}},[a("a-button",{attrs:{type:"primary"},on:{click:e.doQuery}},[e._v("刷新")])],1)],1)],1),a("a-divider",[e._v("分割线")]),a("a-table",{attrs:{columns:e.columns,"data-source":e.tableData,rowKey:function(e){return e.date+e.number},pagination:e.pagination,loading:e.tableLoading,size:"small",bordered:""},scopedSlots:e._u([{key:"number",fn:function(t,n){return[a("div",{attrs:{title:n.name}},[n.name&&"未知号码"!=n.name?a("a-tag",[a("a-icon",{attrs:{type:"read"}}),e._v(" "+e._s(n.name)+" ")],1):e._e(),a("a-tag",{staticStyle:{color:"#38a624"}},[e._v(" "+e._s(n.number)+" ")]),"1"==n.type?a("a-tag",[e._v("呼入")]):"2"==n.type?a("a-tag",[e._v("呼出")]):"3"==n.type?a("a-tag",[e._v("未接")]):a("a-tag",[e._v("未知")]),a("a-tag",[e._v(" "+e._s("通话时长："+n.duration+"秒")+" ")])],1)]}},{key:"date",fn:function(t,n){return[a("div",{style:{color:"#000"}},[e._v(" "+e._s(e.format(t,"yyyy-MM-dd HH:mm:ss"))+" ")])]}},{key:"sim",fn:function(t,n){return["0"==t?a("a-tag",{attrs:{color:"#38a624",title:"卡槽一"}},[e._v(" SIM1 ")]):"1"==t?a("a-tag",{attrs:{color:"#756616",title:"卡槽二"}},[e._v(" SIM2 ")]):a("a-tag",[e._v(" "+e._s("未知:"+t)+" ")])]}}])})],1)},r=[],o=a(55107),i=a(97440),l=a(28935),u=a(55399),s={components:{SmileOutlined:u.SmileOutlined,DownOutlined:u.DownOutlined},data:function(){var e=this;return{query:{type:"0",phone_number:""},options:[{value:"0",label:"全部"},{value:"1",label:"呼入"},{value:"2",label:"呼出"},{value:"3",label:"未接"}],solts:[{text:"卡槽一",value:"0"},{text:"卡槽二",value:"1"},{text:"-",value:"-1"}],tableLoading:!0,pagination:{total:0,current:1,defaultPageSize:10,showTotal:function(e){return"共 ".concat(e," 条")},pageSizeOptions:["10","20","50","100"],onChange:function(t,a){return e.onPageChange(t)},onShowSizeChange:function(t,a){return e.onPageShowSizeChange(a)}},tableData:[],columns:[{title:"时间",dataIndex:"dateLong",width:150,scopedSlots:{customRender:"date"}},{title:"卡槽",dataIndex:"sim_id",width:50,filters:this.solts,scopedSlots:{customRender:"sim"}},{title:"详细",dataIndex:"number",scopedSlots:{customRender:"number"}}]}},created:function(){this.doQuery()},methods:{doQuery:function(){var e=this;this.tableLoading=!0;var t=(new Date).getTime();this.$axios({method:"post",url:o.Z.serverUrl()+"/call/query",data:{data:{type:this.query.type,page_num:this.pagination.current,page_size:this.pagination.defaultPageSize,phone_number:this.query.phone_number},timestamp:t,sign:o.Z.sisgn(t,o.Z.secret())}}).then((function(t){200===t.data.code?(l.Z.prototype.$message.success(t.data.msg),e.tableData=t.data.data,e.pagination.total=t.data.data.length):l.Z.prototype.$message.error("请求异常:"+t.data.msg),e.tableLoading=!1})).catch((function(t){l.Z.prototype.$message.error("请求异常:"+t.message),e.tableLoading=!1}))},format:function(e,t){return i.Z.format(new Date(e),t)},onPageChange:function(e,t){this.pagination.current=e},onPageShowSizeChange:function(e){this.pagination.defaultPageSize=e}},watch:{}},c=s,p=a(1001),d=(0,p.Z)(c,n,r,!1,null,null,null),g=d.exports},97440:function(e,t,a){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}a.d(t,{Z:function(){return l}});a(21703);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(74916),a(77601),a(15306),a(24603),a(28450),a(88386),a(39714),a(23123);var l=r((function e(){o(this,e)}));i(l,"format",(function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},n={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},r={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Friday",5:"Saturday",6:"Sunday"};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+n[e.getDay()+""])),a)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[o]:("00"+a[o]).substr((""+a[o]).length)));return/(e+)/.test(t)&&(t=t.replace(RegExp.$1,r[e.getDay()+""])),t})),i(l,"getDateTimeStamp",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",a=e.split(t),n=new Date;return n.setUTCFullYear(a[0],a[1]-1,a[2]),n.getTime()})),i(l,"diffDates",(function(e,t){for(var a=l.getDateTimeStamp(e),n=l.getDateTimeStamp(t),r=[],o=a;o<=n;)r.push({fullDate:l.format(new Date(parseInt(o)),"yyyy-M-d"),date:l.format(new Date(parseInt(o)),"M-d"),week:l.format(new Date(parseInt(o)),"EE")}),o+=864e5;return r}))}}]);
//# sourceMappingURL=231-legacy.2cb52454.js.map